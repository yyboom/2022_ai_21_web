<meta charset="utf-8">

<style>
#map{
	width:100%;
	height:400px;
	border:1px solid black; 
}
</style>
<script>
var lat = 37.5276891;
var lng = 127.051432;
var map;

function display(){
	var mapContainer = document.querySelector('#map'); 
	var mapOption = { 
	        center: new kakao.maps.LatLng(lat, lng), // 지도의 중심좌표
	        level: 8 // 지도의 확대 레벨
	    };
	map = new kakao.maps.Map(mapContainer, mapOption); 
};

function displaymarker(data){
	
	for(var i=0; i<data.length; i++){
		 var marker = new kakao.maps.Marker({
	        map: map,
	        position: new kakao.maps.LatLng(data[i].lat, data[i].lng)
		 });
		 
		 var iwContent = data[i].title;
	     var iwPosition = new kakao.maps.LatLng(data[i].lat, data[i].lng);

		 var infowindow = new kakao.maps.InfoWindow({
		     position : iwPosition, 
		     content : iwContent
		 });
		 kakao.maps.event.addListener(marker, 'mouseover', mouseoverListener(marker, infowindow));
		 kakao.maps.event.addListener(marker, 'mouseout', mouseoutListener(marker, infowindow));
		 kakao.maps.event.addListener(marker, 'click', mouseclickListener(data[i].target));
	};
	
	function mouseoverListener(marker, infowindow) {
		return function(){
			infowindow.open(map, marker);
		};
	}
	function mouseoutListener(marker, infowindow) {
		return function(){
			infowindow.close();
		};
	}
	function mouseclickListener(target) {
	  	return function(){
	  		location.href = target;
	  	};
	}
	
};

function getdata(){
	// /getmarker
	$.ajax({
		url:'/getmarker',
		success:function(data){
			displaymarker(data);
		}
	});
/* 	var data = [
		{'title':'국밥집','target':'http://www.naver.com','lat':37.5286891,'lng':127.061432},
		{'title':'짬뽕집','target':'http://www.daum.net','lat':37.5386891,'lng':127.021432},
		{'title':'닭발집','target':'http://www.google.com','lat':37.5186891,'lng':127.031432}
	]; */
	
};

$(document).ready(function(){
	display();
	$('#bt').click(function(){
		getdata();
	});
});
</script>

<h1>Geo02 Center</h1>
<button id="bt">Click</button>
<div id="map"></div> 




